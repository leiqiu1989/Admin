define("terminalManager/index",["common","api","underscore","../../tpl/terminalManager/index","../../tpl/terminalManager/add"],function(e,t,i){"use strict";var n=e("common"),l=e("api");e("underscore");var a={index:e("../../tpl/terminalManager/index"),add:e("../../tpl/terminalManager/add")},d=function(){};$.extend(d.prototype,{init:function(){var e=this;n.renderContent(a.index),n.initTree({url:l.getAreaList,param:{},treeId:"tree",idKey:"ADCD",pIdKey:"ParentCode",name:"ADNM",hasSearchClick:!0,callback:function(t,i,n){e.areaCode=n.ADCD}}),this.initTable(),this.event()},initProperty:function(){this.areaCode=null},initTable:function(){var e=this;layui.use(["table"],function(){var t=layui.table;t.render({elem:"#modemTbList",url:l.getModemList,page:!0,cols:[[{title:"",field:"Id",type:"checkbox"},{title:"终端名称",field:"ModemName"},{title:"MAC地址",field:"Mac"},{title:"IP地址",field:"ModemIp"},{title:"IP端口",field:"ModemPort"},{title:"优先级",field:"Priority"},{title:"播出频率",field:"PlayFrequency"},{title:"设备状态",field:"Status"},{title:"播出衰减",field:"PlayAttenuation"},{title:"上级主频",field:"MainFrequency"},{title:"上级副频",field:"ViceFrequency"},{title:"普通音源",field:"CommonSource"},{title:"应急音源",field:"EmergencySource"},{title:"所属区域",field:"AreaCode"},{title:"安装地址",field:"Adress"},{title:"经 度",field:"Lng"},{title:"纬 度",field:"Lat"},{title:"验证类型",field:"VerifyType"},{title:"电话密码",field:"TelPWD"},{title:"备注",field:"Description"}]]}),e.table=t})},deleteRow:function(e){var t=this;n.layConfirm("确定要删除该设备?",function(){n.ajax(l.deleteModem,{guid:e},function(e){if(e&&e.success)return n.layMsg("设备删除成功!"),t.table.reload("modemTbList"),!1})})},event:function(){var e=this;$("#content").off().on("click",".js-add",function(){n.changeHash("#terminalManager/add")}).on("click",".js-edit",function(){var t=n.getSelectedRow(e.table,"modemTbList");t.success&&n.changeHash("#terminalManager/add/",{guid:t.data.Guid})}).on("click",".js-del",function(){n.getSelectedRow(e.table,"modemTbList");rt.success&&e.deleteRow(rt.data.Guid)})}});var r=new d;t.init=function(){r.init()}});