define("common/common",["api","underscore"],function(e,t,a){"use strict";e("api");e("underscore"),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},template.helper("formateDate",function(e,t){return t=t||"yyyy/MM/dd",e?new Date(e).format(t):""});var n={layUIDialog:function(e){layui.use("layer",function(){var t=layui.layer;t.open($.extend(e,{offset:"60px"}))})},renderForm:function(){layui.use("form",function(){var e=layui.form;e.render()})},initDateTime:function(e){layui.use("laydate",function(){var t=layui.laydate;t.render(e)})},renderContent:function(e){$("#content").removeAttr("style").empty().html(template.compile(e)())},transferDateTime:function(e){var t=e;if(_.isString(e)){var a=Date.parse(e);isNaN(a)||(t=new Date(a))}return _.isNumber(e)&&(t=new Date(e)),_.isDate(t)?t.format("yyyy-MM-dd hh:mm:ss"):t},checkMayBeEmptyTime:function(e,t){if(e||t){if(e&&t){var a=this.equalsTime(e,t);return a.result||this.toast("开始日期不能大于结束日期!"),a.result}return this.toast("日期不能为空!"),!1}return!0},equalsTime:function(e,t){e=_.isString(e)?Date.parse(e.replace(/-/g,"/")):Date.parse(e),t=_.isString(t)?Date.parse(t.replace(/-/g,"/")):Date.parse(t);var a=t-e;return{result:a>0,diffTimes:a}},checkTime:function(e,t,a){if(!e||!t)return n.toast("日期不能为空！"),!1;var i=this.equalsTime(t,e);if(a){var r=24*a*60*60*1e3;if(!i.result||i.diffTimes>r)return n.toast("时间周期必须小于或等于"+a+"天!"),!1}return!!i.result||(n.toast("结束日期必须大于或者开始日期!"),!1)},initBetweenDateTime:function(e,t,a){var n=(new Date).format("yyyy/MM/dd H:m"),i={lang:"ch",timepicker:!0,format:"Y/m/d H:i"},r=$.extend({},i,{maxDate:n}),o=$.extend({},i,{maxDate:n});$(e).datetimepicker(r),$(t).datetimepicker(o)},serialParam:function(e){var t="";return e&&_.isObject(e)&&$.each(e,function(e,a){t+=e+"="+a+"&"}),t.substring(0,t.length-1)},changeHash:function(e,t){var a=t?"&":"/";window.location.hash=e+this.serialParam(t)+a+"time="+(new Date).valueOf()},clearData:function(){this.setCookie("abc-sid",null,-1)},loading:function(e,t){t=t||"加载中...",e=e||"show",$("#glb_loading").size()<1&&$("#glb_loading_msg").size()<1&&($('<div id="glb_loading"></div>').appendTo("body"),$('<div id="glb_loading_msg">'+t+"</div>").appendTo("body")),"show"===e?$("#glb_loading,#glb_loading_msg").show():$("#glb_loading,#glb_loading_msg").hide()},setCookie:function(e,t,a){a=a||7,$.cookie(e,t,{expires:a})},getCookie:function(e){return $.cookie(e)},setlocationStorage:function(e,t){window.localStorage.setItem(e,t)},getlocationStorage:function(e){return window.localStorage.getItem(e)},removeLocationStorage:function(e){window.localStorage.removeItem(e)},getElValue:function(e,t){return t=t||"value","value"===t?$.trim($(e).val()):$.trim($(e).text())},setElValue:function(e,t){$(e).val(t)},getFormData:function(e){var t=$(e).find(":input").not('[data-nosubmit="true"]'),a={};return $(t).each(function(e,t){var n=null,i=null;if(n=$(t).attr("name")){if($(t).is(":checkbox")){var r=$(t).is(":checked");i=r?$(t).data("chkvalue"):$(t).data("unchkvalue")}else i="SELECT"===$(t)[0].tagName?$(t).children("option:selected").val():$(t).val();a[n]=i}}),a},setFormData:function(e,t){if(t&&!$.isEmptyObject(t)){var a=$(e).find(":input"),n=null;$(a).each(function(e,a){n=$(a).attr("name"),n&&("SELECT"===$(a)[0].tagName?$(a).val(t[n]):$(a).val(t[n]))})}},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null},getBundle:function(){var e=Array.prototype.slice.call(arguments),t=$.map(e,function(e){return _.isString(e)?$.get(e):e.done?e:$.get(e.url,e.data)}),a=$.Deferred();return $.when.apply($,t).done(function(){var e=_.toArray(arguments),t=_.map(e,function(e){return _.isArray(e)&&"success"===e[1]?e[0]:e});a.resolve.apply(a,t)}).fail(function(){a.reject(arguments)}),a.promise()},ajax:function(e,t,a,n){var i=this;t=t||{},n=n||{};var r=this.getCookie("abc-sid");return r&&(n=$.extend({headers:{"abc-sid":r}},n)),this.loading(),$.ajax($.extend({type:"POST",url:e,data:t,dataType:"json",cache:!1,success:function(e){a&&"function"==typeof a&&a.call(this,e)},error:function(e,t,a){}},n)).always(function(){i.loading("hide")})}};return n}),define("common/api",[],function(e,t,a){"use strict";var n="//openapi.dev-ag.56qq.com",i={getInfo:n+"/abc/org/info/get",upload:n+"/abc/org/register/pic/upload",register:n+"/abc/org/register",billList:n+"/abc/bill/list",publish:n+"/abc/cargo/publish"};return i});